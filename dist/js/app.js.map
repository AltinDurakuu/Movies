{"version":3,"file":"app.js","sources":["app.js"],"sourcesContent":["const APIURL = \"https://api.themoviedb.org/3/\";\r\nconst ajaxHTML = document.getElementById('ajax-data');\r\nlet genre = 0;\r\nlet type = 'movie';\r\nlet rating = 1;\r\nlet year;\r\nlet yearQuery;\r\nlet title;\r\nlet querySearch;\r\nlet hey = \"2312-21-2\";\r\nlet searchForm = document.getElementById(\"searchBtn\");\r\nsearchForm.addEventListener(\"click\", function(e){\r\n  e.preventDefault();\r\n  genre = document.getElementById('genre').value;\r\n  type = document.getElementById('type').value;\r\n  year = document.getElementById('year').value;\r\n  rating = document.getElementById(\"rating\").value;\r\n  querySearch = document.getElementById(\"querySearch\").value;\r\n\r\n  getPosts(querySearch,  type, genre, rating, year);\r\n});\r\n\r\n\r\nfunction getPosts(querySearch, type, genre = 0, rating = 1, year = \"\") {\r\n   ajaxHTML.innerHTML = '';\r\n  fetch(`${APIURL}search/${type}?api_key=7682ae2ffb72cd97f7a33b00bf175475&query=${querySearch}`)\r\n  .then(response => response.json())\r\n  .then(posts => {\r\n  console.log(posts);\r\n  if(posts.successs == 'False') {\r\n    console.log('Nothing found');\r\n  } else {\r\n    console.log(posts.results);\r\n    posts.results.forEach(post => {\r\n        if(type == \"movie\"){\r\n            yearQuery = post.release_date;\r\n          }else if(type == \"tv\"){\r\n            yearQuery = post.first_air_date; \r\n          }\r\n        \r\n    if((post.genre_ids.includes(parseInt(genre)) || genre == 0)  && (year == yearQuery.substring(0,4) || year == \"\") && (rating <= post.vote_average)){\r\n      ajaxHTML.appendChild(renderPosts(post));\r\n      addModal(post);\r\n    }\r\n\r\n    });\r\n  }\r\n  })\r\n  .catch(error => console.error(error));\r\n}\r\nfunction renderPosts(post) {\r\n  if(type == \"movie\"){\r\n    title = post.title;\r\n  }else{\r\n    title = post.name;\r\n  }\r\n\r\n  const postData = \r\n  `<img src=\"https://image.tmdb.org/t/p/original/${post.poster_path}\" class=\"card-img-top\" alt=\"${post.original_name}\">`+\r\n  `<div class=\"card-body\">`+\r\n    `<h5 class=\"card-title\">${title}</h5>`+\r\n    `<p class=\"card-text\">${post.overview}</p>` +\r\n  `</div>`+\r\n  `<button type=\"button\" class=\"btn btn-primary py-3\" data-target=\"${post.id}\">View more</button>`;\r\n  \r\n  const postWrapper = document.createElement('div');\r\n  postWrapper.classList.add('card');\r\n  postWrapper.innerHTML = postData;\r\n\r\n  return postWrapper;\r\n}\r\nfunction addModal(post){\r\nlet btnns = document.querySelectorAll('.btn-primary');\r\nbtnns.forEach(element => {\r\n  element.addEventListener('click', function(){\r\n    console.log('hey');\r\n    if(post.id == element.getAttribute('data-target')){\r\n      let rating = post.vote_average;\r\n      let lang = post.original_language;\r\n      let year;\r\n      let title;\r\n      if(type == \"movie\"){\r\n        year = post.release_date;\r\n        title = post.title;\r\n      }else{\r\n        year = post.first_air_date; \r\n        title = post.name;\r\n      }\r\n      let movieInfo = \r\n    `<div \"class=\"modal fade\" id=\"${post.id}\">` +\r\n    `<div class=\"modal-dialog\" id=\"modal-dialog\" role=\"document\">`+\r\n    `<img src=\"https://image.tmdb.org/t/p/original/${post.poster_path}\" class=\"card-img-top\" alt=\"${post.original_name}\">`+\r\n      `<div class=\"modal-content\">`+\r\n        `<div class=\"modal-header\">`+\r\n         ` <h5 class=\"modal-title\" id=\"exampleModalLongTitle\">${title}</h5>`+\r\n         `</button>`+\r\n       `</div>`+\r\n        `<div class=\"modal-body\">`+\r\n        `<ul>`+\r\n        `<li>Rating ${rating}</li>`+\r\n        `<li>Language ${lang.toUpperCase()}</li>`+\r\n        `<li>Air Date ${year}</li>`+\r\n        `</ul>` +\r\n        `</div>`+\r\n       `<div class=\"modal-footer\">`+\r\n         `<button type=\"button\" class=\"btn btn-secondary\" id=\"close\" data-dismiss=\"modal\">Close</button>`+\r\n        `</div>`+\r\n      `</div>`+\r\n      `</div>`+\r\n    `</div>`;\r\n    let modalWrapper = document.getElementById(\"modals\");\r\n    modalWrapper.innerHTML = movieInfo;\r\n    modalWrapper.firstElementChild.classList.add('active-modal');\r\n    document.getElementById('close').addEventListener('click', function(){\r\n      modalWrapper.firstElementChild.classList.remove('active-modal');\r\n      modalWrapper.innerHTML = \"\";\r\n    })\r\n    }\r\n  })\r\n});}"],"names":["APIURL","ajaxHTML","document","getElementById","genre","type","rating","year","yearQuery","title","querySearch","hey","searchForm","getPosts","innerHTML","fetch","then","response","json","posts","console","log","successs","results","forEach","post","release_date","first_air_date","genre_ids","includes","parseInt","substring","vote_average","appendChild","renderPosts","addModal","catch","error","name","postData","poster_path","original_name","overview","id","postWrapper","createElement","classList","add","btnns","querySelectorAll","element","addEventListener","getAttribute","lang","original_language","movieInfo","toUpperCase","modalWrapper","firstElementChild","remove","e","preventDefault","value"],"mappings":"AAAA,MAAMA,OAAS,gCACTC,SAAWC,SAASC,eAAe,aACzC,IAAIC,MAAQ,EACRC,KAAO,QACPC,OAAS,EACTC,KACAC,UACAC,MACAC,YACAC,IAAM,YACNC,WAAaV,SAASC,eAAe,aAazC,SAASU,SAASH,EAAaL,EAAMD,EAAQ,EAAGE,EAAS,EAAGC,EAAO,IAChEN,SAASa,UAAY,GACtBC,SAASf,gBAAgBK,oDAAuDK,KAC/EM,KAAKC,GAAYA,EAASC,QAC1BF,KAAKG,IACNC,QAAQC,IAAIF,GACS,SAAlBA,EAAMG,SACPF,QAAQC,IAAI,kBAEZD,QAAQC,IAAIF,EAAMI,SAClBJ,EAAMI,QAAQC,QAAQC,IACP,SAARpB,EACCG,UAAYiB,EAAKC,aACF,MAARrB,IACPG,UAAYiB,EAAKE,iBAGrBF,EAAKG,UAAUC,SAASC,SAAS1B,KAAoB,GAATA,KAAiBG,GAAQC,UAAUuB,UAAU,EAAE,IAAc,IAARxB,IAAgBD,GAAUmB,EAAKO,eAClI/B,SAASgC,YAAYC,YAAYT,IACjCU,SAASV,SAMZW,MAAMC,GAASjB,QAAQiB,MAAMA,IAEhC,SAASH,YAAYT,GAEjBhB,MADS,SAARJ,KACOoB,EAAKhB,MAELgB,EAAKa,KAGTC,mDAC2Cd,EAAKe,0CAA0Cf,EAAKgB,kBACrG,oDAC4BhC,qCACFgB,EAAKiB,eAC/B,4EACmEjB,EAAKkB,yBAExE,MAAMC,EAAc1C,SAAS2C,cAAc,OAI3C,OAHAD,EAAYE,UAAUC,IAAI,QAC1BH,EAAY9B,UAAYyB,EAEjBK,EAET,SAAST,SAASV,GAClB,IAAIuB,EAAQ9C,SAAS+C,iBAAiB,gBACtCD,EAAMxB,QAAQ0B,IACZA,EAAQC,iBAAiB,QAAS,WAEhC,GADA/B,QAAQC,IAAI,OACTI,EAAKkB,IAAMO,EAAQE,aAAa,eAAe,CAChD,IAAI9C,EAASmB,EAAKO,aAClB,IAAIqB,EAAO5B,EAAK6B,kBACZ/C,EACAE,EAGFA,EAFS,SAARJ,MACDE,EAAOkB,EAAKC,aACJD,EAAKhB,QAEbF,EAAOkB,EAAKE,eACJF,EAAKa,MAEXiB,kCAC0B9B,EAAKkB,OACrC,gHACiDlB,EAAKe,0CAA0Cf,EAAKgB,kBACnG,+GAE0DhC,SACvD,4DAIaH,yBACE+C,EAAKG,qCACLjD,SAChB,8JAQJ,IAAIkD,EAAevD,SAASC,eAAe,UAC3CsD,EAAa3C,UAAYyC,EACzBE,EAAaC,kBAAkBZ,UAAUC,IAAI,gBAC7C7C,SAASC,eAAe,SAASgD,iBAAiB,QAAS,WACzDM,EAAaC,kBAAkBZ,UAAUa,OAAO,gBAChDF,EAAa3C,UAAY,UAxG/BF,WAAWuC,iBAAiB,QAAS,SAASS,GAC5CA,EAAEC,iBACFzD,MAAQF,SAASC,eAAe,SAAS2D,MACzCzD,KAAOH,SAASC,eAAe,QAAQ2D,MACvCvD,KAAOL,SAASC,eAAe,QAAQ2D,MACvCxD,OAASJ,SAASC,eAAe,UAAU2D,MAC3CpD,YAAcR,SAASC,eAAe,eAAe2D,MAErDjD,SAASH,YAAcL,KAAMD,MAAOE,OAAQC"}