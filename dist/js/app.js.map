{"version":3,"file":"app.js","sources":["app.js"],"sourcesContent":["const APIURL = \"https://api.themoviedb.org/3/\";\r\nconst ajaxHTML = document.getElementById('ajax-data');\r\nlet genre = 0;\r\nlet type = 'movie';\r\nlet rating = 1;\r\nlet year;\r\nlet yearQuery;\r\nlet title;\r\nlet querySearch;\r\nlet hey = \"2312-21-2\";\r\nlet searchForm = document.getElementById(\"searchBtn\");\r\nsearchForm.addEventListener(\"click\", function(e){\r\n  e.preventDefault();\r\n  genre = document.getElementById('genre').value;\r\n  type = document.getElementById('type').value;\r\n  year = document.getElementById('year').value;\r\n  rating = document.getElementById(\"rating\").value;\r\n  querySearch = document.getElementById(\"querySearch\").value;\r\n  getPosts(querySearch,  type, genre, rating, year);\r\n});\r\n\r\n\r\nfunction getPosts(querySearch, type, genre = 0, rating = 1, year = \"\") {\r\n  if(type == 'movie'){\r\n    yearQuery = \"year\";\r\n  }else{\r\n  yearQuery = \"first_air_date_year\"\r\n}\r\n   ajaxHTML.innerHTML = '';\r\n  fetch(`${APIURL}search/${type}?api_key=7682ae2ffb72cd97f7a33b00bf175475&query=${querySearch}&${yearQuery}=${year}`)\r\n  .then(response => response.json())\r\n  .then(posts => {\r\n  console.log(posts);\r\n  if(posts.successs == 'False') {\r\n    console.log('Nothing found');\r\n  } else {\r\n    console.log(posts.results);\r\n    posts.results.forEach(post => {\r\n        if(type == \"movie\"){\r\n            yearQuery = post.release_date;\r\n          }else if(type == \"tv\"){\r\n            yearQuery = post.first_air_date; \r\n          }\r\n        \r\n    if((post.genre_ids.includes(parseInt(genre)) || genre == 0) && (rating <= post.vote_average)){\r\n      ajaxHTML.appendChild(renderPosts(post));\r\n      addModal(post);\r\n    }\r\n\r\n    });\r\n  }\r\n  })\r\n  .catch(error => console.error(error));\r\n}\r\nfunction renderPosts(post) {\r\n  if(type == \"movie\"){\r\n    title = post.title;\r\n  }else{\r\n    title = post.name;\r\n  }\r\n\r\n  const postData = \r\n  `<img src=\"https://image.tmdb.org/t/p/original/${post.poster_path}\" class=\"card-img-top\" alt=\"${post.original_name}\">`+\r\n  `<div class=\"card-body\">`+\r\n    `<h5 class=\"card-title\">${title}</h5>`+\r\n    `<p class=\"card-text\">${post.overview}</p>` +\r\n  `</div>`+\r\n  `<button type=\"button\" class=\"btn btn-primary py-3\" data-target=\"${post.id}\">View more</button>`;\r\n  \r\n  const postWrapper = document.createElement('div');\r\n  postWrapper.classList.add('card');\r\n  postWrapper.innerHTML = postData;\r\n\r\n  return postWrapper;\r\n}\r\nfunction addModal(post){\r\nlet btnns = document.querySelectorAll('.btn-primary');\r\nbtnns.forEach(element => {\r\n  element.addEventListener('click', function(){\r\n    console.log('hey');\r\n    if(post.id == element.getAttribute('data-target')){\r\n      let rating = post.vote_average;\r\n      let lang = post.original_language;\r\n      let year;\r\n      let title;\r\n      if(type == \"movie\"){\r\n        year = post.release_date;\r\n        title = post.title;\r\n      }else{\r\n        year = post.first_air_date; \r\n        title = post.name;\r\n      }\r\n      let movieInfo = \r\n    `<div \"class=\"modal fade\" id=\"${post.id}\">` +\r\n    `<div class=\"modal-dialog\" id=\"modal-dialog\" role=\"document\">`+\r\n    `<img src=\"https://image.tmdb.org/t/p/original/${post.poster_path}\" class=\"card-img-top\" alt=\"${post.original_name}\">`+\r\n      `<div class=\"modal-content\">`+\r\n        `<div class=\"modal-header\">`+\r\n         ` <h5 class=\"modal-title\" id=\"exampleModalLongTitle\">${title}</h5>`+\r\n         `</button>`+\r\n       `</div>`+\r\n        `<div class=\"modal-body\">`+\r\n        `<ul>`+\r\n        `<li>Rating ${rating}</li>`+\r\n        `<li>Language ${lang.toUpperCase()}</li>`+\r\n        `<li>Air Date ${year}</li>`+\r\n        `</ul>` +\r\n        `</div>`+\r\n       `<div class=\"modal-footer\">`+\r\n         `<button type=\"button\" class=\"btn btn-secondary\" id=\"close\" data-dismiss=\"modal\">Close</button>`+\r\n        `</div>`+\r\n      `</div>`+\r\n      `</div>`+\r\n    `</div>`;\r\n    let modalWrapper = document.getElementById(\"modals\");\r\n    modalWrapper.innerHTML = movieInfo;\r\n    modalWrapper.firstElementChild.classList.add('active-modal');\r\n    document.getElementById('close').addEventListener('click', function(){\r\n      modalWrapper.firstElementChild.classList.remove('active-modal');\r\n      modalWrapper.innerHTML = \"\";\r\n    })\r\n    }\r\n  })\r\n});}"],"names":["APIURL","ajaxHTML","document","getElementById","genre","type","rating","year","yearQuery","title","querySearch","hey","searchForm","getPosts","innerHTML","fetch","then","response","json","posts","console","log","successs","results","forEach","post","release_date","first_air_date","genre_ids","includes","parseInt","vote_average","appendChild","renderPosts","addModal","catch","error","name","postData","poster_path","original_name","overview","id","postWrapper","createElement","classList","add","btnns","querySelectorAll","element","addEventListener","getAttribute","lang","original_language","movieInfo","toUpperCase","modalWrapper","firstElementChild","remove","e","preventDefault","value"],"mappings":"AAAA,MAAMA,OAAS,gCACTC,SAAWC,SAASC,eAAe,aACzC,IAAIC,MAAQ,EACRC,KAAO,QACPC,OAAS,EACTC,KACAC,UACAC,MACAC,YACAC,IAAM,YACNC,WAAaV,SAASC,eAAe,aAYzC,SAASU,SAASH,EAAaL,EAAMD,EAAQ,EAAGE,EAAS,EAAGC,EAAO,IAE/DC,UADS,SAARH,EACW,OAEF,sBAEXJ,SAASa,UAAY,GACtBC,SAASf,gBAAgBK,oDAAuDK,KAAeF,aAAaD,KAC3GS,KAAKC,GAAYA,EAASC,QAC1BF,KAAKG,IACNC,QAAQC,IAAIF,GACS,SAAlBA,EAAMG,SACPF,QAAQC,IAAI,kBAEZD,QAAQC,IAAIF,EAAMI,SAClBJ,EAAMI,QAAQC,QAAQC,IACP,SAARpB,EACCG,UAAYiB,EAAKC,aACF,MAARrB,IACPG,UAAYiB,EAAKE,iBAGrBF,EAAKG,UAAUC,SAASC,SAAS1B,KAAoB,GAATA,IAAgBE,GAAUmB,EAAKM,eAC7E9B,SAAS+B,YAAYC,YAAYR,IACjCS,SAAST,SAMZU,MAAMC,GAAShB,QAAQgB,MAAMA,IAEhC,SAASH,YAAYR,GAEjBhB,MADS,SAARJ,KACOoB,EAAKhB,MAELgB,EAAKY,KAGTC,mDAC2Cb,EAAKc,0CAA0Cd,EAAKe,kBACrG,oDAC4B/B,qCACFgB,EAAKgB,eAC/B,4EACmEhB,EAAKiB,yBAExE,MAAMC,EAAczC,SAAS0C,cAAc,OAI3C,OAHAD,EAAYE,UAAUC,IAAI,QAC1BH,EAAY7B,UAAYwB,EAEjBK,EAET,SAAST,SAAST,GAClB,IAAIsB,EAAQ7C,SAAS8C,iBAAiB,gBACtCD,EAAMvB,QAAQyB,IACZA,EAAQC,iBAAiB,QAAS,WAEhC,GADA9B,QAAQC,IAAI,OACTI,EAAKiB,IAAMO,EAAQE,aAAa,eAAe,CAChD,IAAI7C,EAASmB,EAAKM,aAClB,IAAIqB,EAAO3B,EAAK4B,kBACZ9C,EACAE,EAGFA,EAFS,SAARJ,MACDE,EAAOkB,EAAKC,aACJD,EAAKhB,QAEbF,EAAOkB,EAAKE,eACJF,EAAKY,MAEXiB,kCAC0B7B,EAAKiB,OACrC,gHACiDjB,EAAKc,0CAA0Cd,EAAKe,kBACnG,+GAE0D/B,SACvD,4DAIaH,yBACE8C,EAAKG,qCACLhD,SAChB,8JAQJ,IAAIiD,EAAetD,SAASC,eAAe,UAC3CqD,EAAa1C,UAAYwC,EACzBE,EAAaC,kBAAkBZ,UAAUC,IAAI,gBAC7C5C,SAASC,eAAe,SAAS+C,iBAAiB,QAAS,WACzDM,EAAaC,kBAAkBZ,UAAUa,OAAO,gBAChDF,EAAa1C,UAAY,UA5G/BF,WAAWsC,iBAAiB,QAAS,SAASS,GAC5CA,EAAEC,iBACFxD,MAAQF,SAASC,eAAe,SAAS0D,MACzCxD,KAAOH,SAASC,eAAe,QAAQ0D,MACvCtD,KAAOL,SAASC,eAAe,QAAQ0D,MACvCvD,OAASJ,SAASC,eAAe,UAAU0D,MAC3CnD,YAAcR,SAASC,eAAe,eAAe0D,MACrDhD,SAASH,YAAcL,KAAMD,MAAOE,OAAQC"}