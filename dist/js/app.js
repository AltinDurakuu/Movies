const APIURL="https://api.themoviedb.org/3/",ajaxHTML=document.getElementById("ajax-data");let genre=0,type="movie",rating=1,year,yearQuery,title,querySearch,hey="2312-21-2",searchForm=document.getElementById("searchBtn");function getPosts(e,t,a=0,r=1,i=""){yearQuery="movie"==t?"year":"first_air_date_year",ajaxHTML.innerHTML="",fetch(`${APIURL}search/${t}?api_key=7682ae2ffb72cd97f7a33b00bf175475&query=${e}&${yearQuery}=${i}`).then(e=>e.json()).then(e=>{console.log(e),"False"==e.successs?console.log("Nothing found"):(console.log(e.results),e.results.forEach(e=>{"movie"==t?yearQuery=e.release_date:"tv"==t&&(yearQuery=e.first_air_date),(e.genre_ids.includes(parseInt(a))||0==a)&&r<=e.vote_average&&(ajaxHTML.appendChild(renderPosts(e)),addModal(e))}))}).catch(e=>console.error(e))}function renderPosts(e){title="movie"==type?e.title:e.name;e=`<img src="https://image.tmdb.org/t/p/original/${e.poster_path}" class="card-img-top" alt="${e.original_name}">`+'<div class="card-body">'+`<h5 class="card-title">${title}</h5>`+`<p class="card-text">${e.overview}</p>`+"</div>"+`<button type="button" class="btn btn-primary py-3" data-target="${e.id}">View more</button>`;const t=document.createElement("div");return t.classList.add("card"),t.innerHTML=e,t}function addModal(l){let e=document.querySelectorAll(".btn-primary");e.forEach(e=>{e.addEventListener("click",function(){if(console.log("hey"),l.id==e.getAttribute("data-target")){var i=l.vote_average;let e=l.original_language,t,a;a="movie"==type?(t=l.release_date,l.title):(t=l.first_air_date,l.name);i=`<div "class="modal fade" id="${l.id}">`+'<div class="modal-dialog" id="modal-dialog" role="document">'+`<img src="https://image.tmdb.org/t/p/original/${l.poster_path}" class="card-img-top" alt="${l.original_name}">`+'<div class="modal-content"><div class="modal-header">'+` <h5 class="modal-title" id="exampleModalLongTitle">${a}</h5>`+'</button></div><div class="modal-body"><ul>'+`<li>Rating ${i}</li>`+`<li>Language ${e.toUpperCase()}</li>`+`<li>Air Date ${t}</li>`+'</ul></div><div class="modal-footer"><button type="button" class="btn btn-secondary" id="close" data-dismiss="modal">Close</button></div></div></div></div>';let r=document.getElementById("modals");r.innerHTML=i,r.firstElementChild.classList.add("active-modal"),document.getElementById("close").addEventListener("click",function(){r.firstElementChild.classList.remove("active-modal"),r.innerHTML=""})}})})}searchForm.addEventListener("click",function(e){e.preventDefault(),genre=document.getElementById("genre").value,type=document.getElementById("type").value,year=document.getElementById("year").value,rating=document.getElementById("rating").value,querySearch=document.getElementById("querySearch").value,getPosts(querySearch,type,genre,rating,year)});
//# sourceMappingURL=app.js.map
